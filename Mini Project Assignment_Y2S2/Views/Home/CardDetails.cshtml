@model Mini_Project_Assignment_Y2S2.Models.CardDetailsViewModel

@{
    ViewData["Title"] = "CardDetails";
}

<link rel="stylesheet" href="~/css/cardDetails.css" asp-append-version="true" />

<div class="parent">
    <a class="back" href="@Url.Action("IndexBack", "Home",new {category=Model.Item.Category})">Back</a>

    <div class="CardDetails">

        <div class="topDetails">
            <!-- 图片轮播 -->
            <div class="image">
                <div class="carousel-container">

                    @if (Model.Item.Images != null && Model.Item.Images.Count > 0)
                    {
                        <img id="carouselImage" src="@Model.Item.Images[0]" style="width:100%; height:100%; object-fit:cover; border-radius:6px;" />
                        @if (Model.Item.Images.Count > 1)
                        {
                            <button id="prevBtn" style="position:absolute; top:50%; left:0; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:white; border:none; padding:5px;">&#10094;</button>
                            <button id="nextBtn" style="position:absolute; top:50%; right:0; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:white; border:none; padding:5px;">&#10095;</button>
                        }
                    }
                    else
                    {
                        <img src="/images/default.png" style="width:100%; height:100%; object-fit:cover; border-radius:6px;" />
                    }
                </div>
            </div>

            <!-- 用户详情，这里改成动态绑定，如果有对应字段的话 -->
            <div class="userDetails">
                <p class="UserDetails">User Details</p>

                <p class="label">Name</p>
                <p class="text">Tan Kai Zhen</p>

                <p class="label">Contact Number</p>
                <p class="text">011-999 9999</p>

                <p class="label">Email</p>
                <p class="text">people@gmail.com</p>

                <p class="label">Item Keep At</p>
                <p class="text">Home</p>
            </div>

        </div>

        <!-- 物品详情 -->
        <div class="bottomDetails">
            <div class="bottomDetails-left">
                <div class="bottomDetails-left2">
                    <p class="label">Found Date</p>
                    <p class="text">@Model.Item.Date.ToString("dd/MM/yyyy")</p>
                    <p class="label">Type</p>
                    <p class="text">@Model.Item.IType</p>
                </div>
                <div class="bottomDetails-right2">
                    <p class="label">Found At</p>
                    <p class="text">@Model.Item.LocationID</p>
                </div>
            </div>
            <div class="bottomDetails-right">
                <p class="label">Description</p>
                <p class="text">@Model.Item.Idescription</p>
            </div>
        </div>

    </div>
</div>

<script>
    // 图片轮播
    let images = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Item.Images ?? new List<string>()));
    let currentIndex = 0;

    const carouselImage = document.getElementById("carouselImage");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    if (prevBtn && nextBtn) {
        prevBtn.addEventListener("click", () => {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            carouselImage.src = images[currentIndex];
        });

        nextBtn.addEventListener("click", () => {
            currentIndex = (currentIndex + 1) % images.length;
            carouselImage.src = images[currentIndex];
        });
    }
</script>
